{% extends 'base/base.html' %}

{% load static %}

{% block title %}
  <title>Dashboard | Lambda</title>
{% endblock title %}

{% block content %}
  <div class="container-fluid">
    <div class="row">
      <div class="col">
        {% include 'base/base_messages.html' %}
      </div>
    </div>

    <div class="row">
      <div class="col-lg mb-4">
        <div class="card border-primary h-100">
          <div class="card-body pb-0">
            <div class="row">
            <div class="col-md-8 mb-3 btn btn-outline-light border-0 text-dark text-left">
              <a href="{% url 'active-tasks' %}" class="stretched-link"></a>
              <h4 class="card-title">Tasks</h4>
              <p class="text-muted mb-0">Tasks that have been assigned to you</p>
            </div>

            {% with table_id="table1" row=True %} {# To include closing row tag #}
              {% include 'tasks/tables/user_task_table.html' %}
            {% endwith %}
          </div>

          <div class="card-footer">
            <a href="{% url 'create-task' %}" class="btn btn-primary align-self-end">New task</a>
          </div>
        </div>
      </div>

      <div class="col-lg mb-4">
        <div class="card border-primary h-100">
          <div class="card-body pb-0">
            <div class="row">
            <div class="col-md-8 mb-3 btn btn-outline-light border-0 text-dark text-left">
              <a href="{% url 'unassigned-tasks' %}" class="stretched-link"></a>
              <h4>Unassigned Tasks</h4>
              <p class="text-muted mb-0">Unassigned tasks from projects led by you</p>
            </div>

            {% with table_id="table2" row=True task_list=unassigned_task_list %} {# To include closing row tag #}
              {% include 'tasks/tables/user_task_table.html' %}
            {% endwith %}
          </div>

          <div class="card-footer">
            <a href="{% url 'create-task' %}" class="btn btn-primary align-self-end">New task</a>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg mb-4">
        <div class="card border-primary h-100">
          <div class="card-body pb-0">
            <div class="row">
            <div class="col-md-8 mb-3 btn btn-outline-light border-0 text-dark text-left">
              <a href="{% url 'active-projects' %}" class="stretched-link"></a>
              <h4>Projects</h4>
              <p class="text-muted mb-0">Projects that you are a part of</p>
            </div>

            {% with table_id="table3" row=True %} {# To include closing row tag #}
              {% include 'projects/tables/generic_project_table.html' %}
            {% endwith %}
          </div>

          <div class="card-footer">
            <a href="{% url 'create-project' %}" class="btn btn-primary align-self-end">New project</a>
          </div>
        </div>
      </div>

      <div class="col-lg mb-4">
        <div class="card border-primary h-100">
          <div class="card-body pb-0">
            <div class="row">
            <div class="col-md-8 mb-3 btn btn-outline-light border-0 text-dark text-left">
              <a href="{% url 'teams' %}" class="stretched-link"></a>
              <h4>Teams</h4>
              <p class="text-muted mb-0">Teams that you are a part of</p>
            </div>

            {% with table_id="table4" row=True %} {# To include closing row tag #}
              {% include 'teams/tables/generic_team_table.html' %}
            {% endwith %}
          </div>

          <div class="card-footer">
            <a href="{% url 'create-team' %}" class="btn btn-primary align-self-end">New team</a>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'base/scripts/tableFunctions.js' %}"></script>
{% endblock scripts %}
